<div class="pet-list">
  <div class="header-section">
    <h2>{{'pets.home.title' | translate}}</h2>
  </div>
  <div class="register-btn-container">
    <button class="register-pet-btn" (click)="navigateToAddPet(getCurrentOwnerId())" mat-flat-button>
      <mat-icon>add</mat-icon>
      Register Pet
    </button>
  </div>

  <div class="search-section">
    <mat-form-field class="search-full-width">
      <mat-label>Search pets</mat-label>
      <input matInput [(ngModel)]="searchQuery" (input)="applyFilter()" placeholder="Search by name">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <div class="pets-grid" *ngIf="dataSource.data.length > 0; else noPets">
    <div class="pet-card" *ngFor="let pet of dataSource.data">
      <div class="pet-image-container">
        <img [src]="pet.imageUrl || '/assets/images/default-pet.jpg'"
             [alt]="pet.petName"
             class="pet-image"
             (error)="onImageError($event)">
        <div class="pet-type-badge">
          <mat-icon>{{getPetIcon(pet.animalType)}}</mat-icon>
        </div>
      </div>

      <div class="pet-info">
        <h3 class="pet-name">{{pet.petName}}</h3>
        <p class="pet-breed">{{pet.animalBreed}}</p>
        <p class="pet-age">{{calculateAge(pet.birthDate)}}</p>

        <div class="pet-details">
          <div class="detail-item">
            <mat-icon>cake</mat-icon>
            <span>{{pet.birthDate | date:'MMM d, y'}}</span>
          </div>
          <div class="detail-item">
            <mat-icon>{{pet.petGender === 'MALE' ? 'male' : 'female'}}</mat-icon>
            <span>{{pet.petGender}}</span>
          </div>
          <div class="detail-item">
            <mat-icon>calendar_today</mat-icon>
            <span>{{pet.registrationDate | date:'MMM d, y'}}</span>
          </div>
        </div>

        <div class="pet-actions">
          <button class="action-btn edit-btn" (click)="navigateToEditPet(pet.id)" mat-flat-button>
            <mat-icon>edit</mat-icon>
            {{'pets.home.buttons.edit' | translate}}
          </button>
          <button class="action-btn medical-btn" (click)="navigateToMedicalHistory(pet.id)" mat-flat-button>
            <mat-icon>medical_services</mat-icon>
            Medical History
          </button>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noPets>
    <div class="no-pets-container">
      <mat-icon class="no-pets-icon">pets</mat-icon>
      <h3>No pets registered yet</h3>
      <p>Start by registering your first pet</p>
      <button class="register-first-pet-btn" (click)="navigateToAddPet(getCurrentOwnerId())" mat-flat-button>
        <mat-icon>add</mat-icon>
        Register Your First Pet
      </button>
    </div>
  </ng-template>

  <mat-paginator [pageSize]="6" [pageSizeOptions]="[6, 12, 18]" showFirstLastButtons></mat-paginator>
</div>
